<% layout('../../../layouts/client/app') %>

<% block('metaTags', `
    <meta name="description" content="Nội Thất Mây Hiên home. We create a product, not just it but all." />
    <meta name="keywords" content="Đồ nội thất mây, đồ nội thất mây, ghế mây, đồ nội thất thủ công"/>

    <meta property="og:url" content="${originalUrl}" id="fbUrl" />
    <!-- <meta property="og:type" content="article" /> -->
    <meta property="og:title" content="${titleRedis(info)} | Giỏ hàng" />
    <meta property="og:description" content="Nội Thất Mây Hiên home. We create a product, not just it but all." />
    <meta property="og:image" content="https://mayhienhome.com/public/client/images/logo/fullLogo.png" />
`) %>

<% stylesheet('/public/client/css/styleCart.css') %>

<% block('title', 'Trang chủ') %>

<div id="contents">
    <div class="titleArea">
        <h2>Giỏ hàng</h2>
    </div>

    <div class="xans-element- xans-order xans-order-basketpackage "><p class="orderStep"><img
                    src="//img.echosting.cafe24.com/skin/base_ko_KR/order/img_order_step1.gif" alt="01 장바구니"/></p>
        <div class="orderListArea ec-base-table typeList gBorder">
            <div class="xans-element- xans-order xans-order-normtitle title ">
                <h3>Tất cả sản phẩm</h3>
            </div>

            <table border="1" summary="" class="xans-element- xans-order xans-order-normindividual xans-record-">
                <colgroup>
                    <col style="width:92px"/>
                    <col style="width:auto"/>
                    <col style="width:98px"/>
                    <col style="width:75px"/>
                    <col style="width:98px"/>
                    <col style="width:98px"/>
                </colgroup>
                <thead>
                    <tr>
                        <th scope="col">Hình ảnh</th>
                        <th scope="col" class="left" style="padding-left: 10px">Thông tin sản phẩm</th>
                        <th scope="col">Giá</th>
                        <th scope="col">Số lượng</th>
                        <th scope="col">Tùy chọn</th>
                    </tr>
                </thead>
                <tfoot class="right">
                    <tr>
                        <td colspan="10">
                            <span>Tổng hóa đơn:</span><strong class="txtEm gIndent10">
                                <span class="txt18" id="cartTotalPrice" data-price="<%= totalPrice %>"><%= formatPrice(totalPrice) %></span> đ
                            </strong>
                            <span lass="displaynone"></span>
                        </td>
                    </tr>
                </tfoot>
                <tbody class="xans-element- xans-order xans-order-list center">
                    <% cart.products.forEach((product) => { %>
                        <tr class="xans-record-">
                            <td class="thumb gClearLine">
                                <a href="/san-pham/<%= product.item.slug %>">
                                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="<%= product.item.image.cover %>"
                                         class="lazyload" alt="<%= product.item.name %>" />
                                </a>
                            </td>
                            <td class="left gClearLine">
                                <strong class="name">
                                    <a href="/san-pham/<%= product.item.slug %>" class="ec-product-name">
                                        <%= product.item.name %>
                                    </a>
                                </strong>
                                <p class="cart__error color-red">
                                    <% if (product.item.quantity <= 0) { %>
                                        Sản phẩm hết hàng
                                    <% } else if (product.item.quantity < product.quantity) { %>
                                        Sản phẩm trong kho không đủ
                                    <% } else if (product.item.price.isAgreement) { %>
                                        Sản phẩm thương lượng giá cả
                                    <% } %>
                                </p>
                            </td>
                            <td class="right">
                                <div class="">
                                    <span style="font-size:12px;color:#000000;font-weight:bold;">
                                        <% if (product.item.price.isAgreement) { %>
                                            Liên hệ<br> <%= info.phone %>
                                        <% } else { %>
                                            <span class="priceDisplay"></span>
                                            <input class="priceValue"
                                                   value="<%= product.item.price.number %>"
                                                   type="hidden"/>
                                            <span class="price dc_price priceDiscountText">
                                                <i class="fa fa-long-arrow-down"
                                                   aria-hidden="true"></i>
                                                <span class="priceDiscountPercent"></span>
                                            </span>
                                            <input class="priceDiscount"
                                                   value="<%= product.item.discount %>"
                                                   type="hidden"/>
                                        <% } %>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <span class="">
                                    <span class="ec-base-qty">
                                        <input class="cartProductQuantity" data-id="<%= product.item._id %>"
                                                <%= (product.item.quantity <= 0 || product.item.price.isAgreement) ? 'disabled' : '' %>
                                               data-quantity="<%= product.item.quantity %>" value="<%= product.quantity %>" type="text"/>
                                        <button class="cartBtnUp" <%= (product.item.quantity <= 0 || product.item.quantity <= product.quantity || product.item.price.isAgreement) ? 'disabled' : '' %>>
                                            <img src="/public/client/images/icons/btn_quantity_up.gif"
                                                 alt="Up" class="up"/>
                                        </button>

                                        <button class="cartBtnDown" <%= product.item.price.isAgreement ? 'disabled' : '' %>>
                                            <img src="/public/client/images/icons/btn_quantity_down.gif"
                                                 alt="Down" class="down"/>
                                        </button>
                                    </span>
                                </span>
                            </td>
                            <td>
                                <button class="remove-product-from-cart"><i class="fa fa-times"></i></button>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
            <p class="color-red"><%= errors('quantity') %></p>
        </div>

        <div class="xans-element- xans-order xans-order-totalorder ec-base-button justify">
            <span class="gRight">
                <form <%= cart._id ? `action=/gio-hang/${cart._id}/xac-nhan method=POST` : 'action=/gio-hang/xac-nhan method=GET'%>>
                    <button class="btn btn-primary" id="cartBtnSubmit"
                            style="padding: 10px 15px; background: #444; color: #fff; font-size: 16px;">Xác nhận</button>
                </form>
            </span>
        </div>
    </div>

    <div class="xans-element- xans-order xans-order-basketguide ec-base-help ">
        <h3>Hướng dẫn sử dụng</h3>
        <div class="inner">
            <h4>Giỏ hàng</h4>
            <ol>
                <li class="item1">Bấm nút xác nhận mua sản phẩm</li>
                <li class="item2">Điền đầy đủ thông tin liên hệ</li>
                <li class="item3">Chuyển khoản ngân hàng và gọi thông báo cho chúng tôi.</li>
            </ol>
        </div>
    </div>
</div>
